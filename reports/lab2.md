# 实现的功能

实验二主要实现了mmap和munmap两个功能。对于mmap而言，我们需要在当前进程的memory_set上申请新的map_area并将映射同时写入page_table。在实现的过程中通过memory_set的insert_frame完成该功能。对于munmap而言，主要判断移除页是否合法与移除页所处maparea即可。

# 1

标志位表明了当前页表项的状态，各个位具体描述的内容不一样。

V位表示当前页表项是否合法，以便于访问下一级页表或当前页表项是否存储已分配的物理地址

RWX表示了当前指向的物理页读写执行的权限

U表示访问当前物理页需要的特技权限

A表示对应虚拟页面是否被访问过，用于页面置换算法

D表示对应虚拟页面是否被修改过，用于写回硬盘时

# 2

satp寄存器，保存了当前的内存模式、页表根地址

节省内存空间，减少启动时虚拟页表加载时间

10G/4096B(页大小)/512=5120(三级页表) => 5120/512 = 10(二级页表)。 共需要10个页面存三级页表，1个页面存二级页表，1个页面存一级页表共12个页面，占空间12*4096B

缺页时触发异常，进入trap_handler函数，根据缺页信息调用sys_mmap分配相应的虚拟页面。

V位失效，重新选择一个物理页框进行映射

# 3

通过trap交给内核处理

页表项中标识U位

速度快，无需进行部分上下文的切换

进入内核态时